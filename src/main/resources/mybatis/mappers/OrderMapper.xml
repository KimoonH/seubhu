<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="store.seub2hu2.order.mapper.OrderMapper">

    <!--
        List<CartItemDto> getOrderItemBySizeNo(@Param("sizeNoList") List<Integer> sizeNoList);
    -->
    <select id="getOrderItemBySizeNo" resultType="store.seub2hu2.cart.dto.CartItemDto">
        SELECT
            P.PROD_NAME AS "product.name"
             , P.PROD_PRICE AS "product.price"
             , PC.COLOR_NAME AS "COLOR.NAME"
             , PS.SIZE_NO  AS "SIZE.NO"
             , PS.PROD_SIZE "SIZE.SIZE"
             , PI.IMG_URL AS imgThum
        FROM PRODUCTS P
                 JOIN PROD_COLORS PC
                      ON P.PROD_NO = PC.PROD_NO
                 JOIN PROD_SIZES PS
                      ON PC.COLOR_NO = PS.COLOR_NO
                 JOIN PROD_IMGS PI
                      ON PC.COLOR_NO = PI.COLOR_NO
        WHERE PI.IMG_THUM = 'Y'
          AND SIZE_NO IN
              <foreach collection="sizeNoList" item="sizeNo" open="(" separator="," close=")">
                #{sizeNo}
              </foreach>
    </select>
</mapper>